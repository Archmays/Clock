<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>è®¤è¯†æ—¶é’Ÿ - è¶£å‘³äº’åŠ¨å­¦ä¹ </title>
    
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- å¼•å…¥ React ç›¸å…³åº“ -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            overscroll-behavior: none;
            touch-action: none; /* ç¦æ­¢é¡µé¢æ•´ä½“æ»šåŠ¨å’Œç¼©æ”¾ */
            font-family: system-ui, -apple-system, sans-serif;
            background-color: #f0f9ff; /* bg-sky-50 */
            /* é€‚é…åˆ˜æµ·å±å®‰å…¨åŒºåŸŸ */
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
        }
        
        /* æŒ‡é’ˆæ™ƒåŠ¨åŠ¨ç”» */
        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }
        .animate-wiggle {
            animation: wiggle 1s ease-in-out;
            transform-origin: 50px 50px;
        }

        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™æ»šåŠ¨åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        // --- å›¾æ ‡ç»„ä»¶ ---
        const Icon = ({ path, className, color }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke={color || "currentColor"} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        const icons = {
            star: <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>,
            eye: <><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></>,
            eyeOff: <><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07-2.3 2.3"/><line x1="1" y1="1" x2="23" y2="23"/></>,
            trophy: <><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></>,
            help: <><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></>,
            vol: <><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></>,
            volX: <><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></>
        };

        // --- éŸ³æ•ˆå¼•æ“ ---
        const useSound = (enabled) => {
            const audioCtxRef = useRef(null);

            const initAudio = useCallback(() => {
                if (!audioCtxRef.current) {
                    const AudioContext = window.AudioContext || window.webkitAudioContext;
                    if (AudioContext) audioCtxRef.current = new AudioContext();
                }
                if (audioCtxRef.current && audioCtxRef.current.state === 'suspended') {
                    audioCtxRef.current.resume();
                }
            }, []);

            const playTone = useCallback((freq, type, duration, startTime = 0) => {
                if (!enabled || !audioCtxRef.current) return;
                const ctx = audioCtxRef.current;
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.type = type;
                osc.frequency.setValueAtTime(freq, ctx.currentTime + startTime);
                gain.gain.setValueAtTime(0.1, ctx.currentTime + startTime);
                gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + startTime + duration);
                osc.connect(gain);
                gain.connect(ctx.destination);
                osc.start(ctx.currentTime + startTime);
                osc.stop(ctx.currentTime + startTime + duration);
            }, [enabled]);

            const playTick = useCallback(() => { initAudio(); playTone(800, 'sine', 0.05); }, [initAudio, playTone]);
            
            const playSuccess = useCallback(() => {
                initAudio();
                playTone(523.25, 'triangle', 0.2, 0);
                playTone(659.25, 'triangle', 0.2, 0.1);
                playTone(783.99, 'triangle', 0.4, 0.2);
                playTone(1046.50, 'sine', 0.6, 0.3);
            }, [initAudio, playTone]);

            const playError = useCallback(() => { initAudio(); playTone(150, 'sawtooth', 0.3); }, [initAudio, playTone]);
            
            const speakTime = useCallback((h, m) => {
                if (!enabled || !window.speechSynthesis) return;
                window.speechSynthesis.cancel();
                const mText = m === 0 ? 'æ•´' : (m < 10 ? 'é›¶' + m + 'åˆ†' : m + 'åˆ†');
                const text = `${h}ç‚¹${mText}`;
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'zh-CN';
                window.speechSynthesis.speak(utterance);
            }, [enabled]);

            return { playTick, playSuccess, playError, speakTime, initAudio };
        };

        const App = () => {
            const [time, setTime] = useState(new Date());
            const [mode, setMode] = useState('explore'); 
            const [showMinutes, setShowMinutes] = useState(true);
            const [targetTime, setTargetTime] = useState(null);
            const [score, setScore] = useState(0);
            const [message, setMessage] = useState("è¯•ç€æ‹¨åŠ¨åˆ†é’ˆçœ‹çœ‹ï¼");
            const [soundEnabled, setSoundEnabled] = useState(true);
            const [dragTarget, setDragTarget] = useState(null);
            const [wiggle, setWiggle] = useState(true);
            
            const clockRef = useRef(null);
            const { playTick, playSuccess, playError, speakTime, initAudio } = useSound(soundEnabled);

            // ä¿®å¤éŸ³é¢‘å’Œè¯­éŸ³åœ¨é¦–æ¬¡åŠ è½½æ— æ³•æ’­æ”¾çš„é—®é¢˜
            // æ·»åŠ å…¨å±€ç‚¹å‡»/è§¦æ‘¸ç›‘å¬ï¼Œåœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡äº¤äº’æ—¶â€œè§£é”â€éŸ³é¢‘ä¸Šä¸‹æ–‡
            useEffect(() => {
                const unlockAudio = () => {
                    initAudio();
                    // å°è¯•æ¢å¤è¯­éŸ³åˆæˆï¼ˆè§£å†³éƒ¨åˆ†æµè§ˆå™¨æš‚åœé—®é¢˜ï¼‰
                    if (window.speechSynthesis) {
                        window.speechSynthesis.resume(); 
                        // å¯é€‰ï¼šæ’­æ”¾ä¸€ä¸ªç©ºéŸ³æ¥é¢„çƒ­ï¼Œä½†è¿™é‡Œåªåš resume
                    }
                    window.removeEventListener('touchstart', unlockAudio);
                    window.removeEventListener('click', unlockAudio);
                };
                
                window.addEventListener('touchstart', unlockAudio, { passive: true });
                window.addEventListener('click', unlockAudio, { passive: true });
                
                return () => {
                    window.removeEventListener('touchstart', unlockAudio);
                    window.removeEventListener('click', unlockAudio);
                };
            }, [initAudio]);

            useEffect(() => {
                const script = document.createElement('script');
                script.src = "https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js";
                script.async = true;
                document.body.appendChild(script);
                const timer = setTimeout(() => setWiggle(false), 1200);
                return () => {
                    clearTimeout(timer);
                    if (document.body.contains(script)) document.body.removeChild(script);
                };
            }, []);

            useEffect(() => {
                const initDate = new Date();
                initDate.setHours(10);
                initDate.setMinutes(10);
                setTime(initDate);
            }, []);

            // æ ¸å¿ƒæ‹–æ‹½é€»è¾‘
            const calculateTimeFromEvent = useCallback((clientX, clientY, targetType) => {
                if (!clockRef.current) return null;

                const rect = clockRef.current.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                const x = clientX - centerX;
                const y = clientY - centerY;

                let angle = Math.atan2(y, x);
                let degrees = angle * (180 / Math.PI) + 90;
                if (degrees < 0) degrees += 360;

                const newTime = new Date(time);

                if (targetType === 'minute') {
                    let minutes = Math.round(degrees / 6);
                    if (minutes === 60) minutes = 0;
                    if (minutes !== newTime.getMinutes()) {
                        newTime.setMinutes(minutes);
                        return { type: 'minute', time: newTime, changed: true };
                    }
                } else if (targetType === 'hour') {
                    let hour = Math.round(degrees / 30);
                    if (hour === 0) hour = 12;
                    const currentH = newTime.getHours() % 12 || 12;
                    if (hour !== currentH) {
                        newTime.setHours(hour);
                        return { type: 'hour', time: newTime, changed: true };
                    }
                }
                return { type: targetType, time: newTime, changed: false };
            }, [time]);

            useEffect(() => {
                if (!dragTarget) return;

                const handleMove = (e) => {
                    e.preventDefault();
                    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                    
                    const result = calculateTimeFromEvent(clientX, clientY, dragTarget);
                    if (result && result.changed) {
                        setTime(result.time);
                        playTick();
                    }
                };

                const handleUp = () => {
                    if (mode === 'explore') {
                        const h = time.getHours() % 12 || 12;
                        const m = time.getMinutes();
                        speakTime(h, m);
                    }
                    setDragTarget(null);
                };

                window.addEventListener('mousemove', handleMove, { passive: false });
                window.addEventListener('touchmove', handleMove, { passive: false });
                window.addEventListener('mouseup', handleUp);
                window.addEventListener('touchend', handleUp);

                return () => {
                    window.removeEventListener('mousemove', handleMove);
                    window.removeEventListener('touchmove', handleMove);
                    window.removeEventListener('mouseup', handleUp);
                    window.removeEventListener('touchend', handleUp);
                };
            }, [dragTarget, calculateTimeFromEvent, playTick, mode, speakTime, time]);


            const triggerConfetti = () => {
                if (window.confetti) {
                    window.confetti({ particleCount: 150, spread: 80, origin: { y: 0.6 }, colors: ['#FFD700', '#FF69B4', '#00BFFF', '#4ADE80'] });
                }
            };

            const startNewChallenge = () => {
                const h = Math.floor(Math.random() * 12) + 1;
                const m = Math.floor(Math.random() * 12) * 5; 
                setTargetTime({ h, m });
                setMessage(`æŒ‘æˆ˜ç›®æ ‡ï¼šæ‹¨åˆ° ${h} ç‚¹ ${m === 0 ? 'æ•´' : m + ' åˆ†'}`);
                
                const randomDate = new Date();
                randomDate.setHours(Math.floor(Math.random() * 12));
                randomDate.setMinutes(Math.floor(Math.random() * 60));
                setTime(randomDate);
            };

            const toggleMode = (newMode) => {
                setMode(newMode);
                initAudio();
                if (newMode === 'quiz') {
                    setScore(0);
                    startNewChallenge();
                } else {
                    setMessage("è‡ªç”±æ¢ç´¢æ—¶é—´ï¼šå¬å¬çœ‹å®ƒæ˜¯å‡ ç‚¹ï¼Ÿ");
                    setTargetTime(null);
                }
            };

            const checkAnswer = () => {
                if (!targetTime) return;
                
                let currentH = time.getHours() % 12;
                if (currentH === 0) currentH = 12;
                const currentM = time.getMinutes();
                
                const isMinuteCorrect = Math.abs(currentM - targetTime.m) <= 1;
                const isHourCorrect = currentH === targetTime.h;

                if (isMinuteCorrect && isHourCorrect) {
                    setScore(s => s + 1);
                    setMessage("å¤ªæ£’äº†ï¼ç­”å¯¹äº†ï¼ğŸ‰");
                    playSuccess();
                    triggerConfetti();
                    const correctDate = new Date(time);
                    correctDate.setMinutes(targetTime.m);
                    setTime(correctDate);
                    setTimeout(startNewChallenge, 2500);
                } else {
                    setMessage("è¿˜æ²¡å¯¹å“¦ï¼Œå†ä»”ç»†æ£€æŸ¥ä¸€ä¸‹ä½ç½®");
                    playError();
                }
            };

            const handleHourClick = (h) => {
                initAudio();
                const newTime = new Date(time);
                newTime.setHours(h);
                setTime(newTime);
                if (mode === 'explore') {
                    setMessage(`ç°åœ¨æ˜¯ ${h} ç‚¹`);
                    speakTime(h, newTime.getMinutes());
                }
            };

            const startDrag = (e, target) => {
                e.preventDefault(); 
                e.stopPropagation();
                initAudio();
                setDragTarget(target);
                setWiggle(false);
            };

            const renderClockNumbers = () => {
                const numbers = [];
                for (let i = 1; i <= 12; i++) {
                    const angle = (i * 30) * (Math.PI / 180);
                    const rHour = 30; 
                    const rMin = 42;
                    
                    const xHour = 50 + rHour * Math.sin(angle);
                    const yHour = 50 - rHour * Math.cos(angle);
                    const xMin = 50 + rMin * Math.sin(angle);
                    const yMin = 50 - rMin * Math.cos(angle);

                    const isCurrentHour = (time.getHours() % 12 || 12) === i;
                    const currentMin = time.getMinutes();
                    const targetMin = i * 5 === 60 ? 0 : i * 5;
                    const isCurrentMin = Math.abs(currentMin - targetMin) < 3 || (Math.abs(currentMin - targetMin) > 57);

                    numbers.push(
                        <React.Fragment key={i}>
                            {showMinutes && (
                                <line 
                                    x1={xHour + "%"} y1={yHour + "%"} 
                                    x2={xMin + "%"} y2={yMin + "%"} 
                                    stroke={isCurrentMin ? "#FF69B4" : "#E5E7EB"} 
                                    strokeWidth="1"
                                    strokeDasharray="2,2"
                                />
                            )}
                            <g onClick={() => handleHourClick(i)} className="cursor-pointer transition-all hover:scale-110">
                                <circle cx={xHour + "%"} cy={yHour + "%"} r="4.5" fill={isCurrentHour ? "#3B82F6" : "white"} stroke="#3B82F6" strokeWidth="1.5" />
                                <text 
                                    x={xHour + "%"} y={yHour + "%"} 
                                    textAnchor="middle" dy=".3em" 
                                    fontSize="4.5" 
                                    fill={isCurrentHour ? "white" : "#1F2937"}
                                    fontWeight="bold"
                                    style={{ pointerEvents: 'none', userSelect: 'none' }} 
                                >
                                    {i}
                                </text>
                            </g>
                            {showMinutes && (
                                <g className="transition-all duration-300">
                                    <circle 
                                        cx={xMin + "%"} cy={yMin + "%"} r="4" 
                                        fill={isCurrentMin ? "#FF69B4" : "#FEF3C7"} 
                                        stroke={isCurrentMin ? "#BE185D" : "#F59E0B"} 
                                        strokeWidth="1" 
                                    />
                                    <text 
                                        x={xMin + "%"} y={yMin + "%"} 
                                        textAnchor="middle" dy=".3em" 
                                        fontSize="3.2" 
                                        fill={isCurrentMin ? "white" : "#B45309"}
                                        fontWeight="bold"
                                        style={{ pointerEvents: 'none', userSelect: 'none' }}
                                    >
                                        {i * 5 === 60 ? '00' : i * 5}
                                    </text>
                                </g>
                            )}
                        </React.Fragment>
                    );
                }
                return numbers;
            };

            const minutes = time.getMinutes();
            const hours = time.getHours(); 
            const displayHours = hours % 12 || 12; 
            
            const minuteAngle = minutes * 6;
            const hourAngle = (hours % 12) * 30 + minutes * 0.5;

            return (
                <div 
                    className="min-h-screen flex flex-col items-center justify-center p-4 md:flex-row md:gap-12 lg:gap-20 select-none"
                    style={{ touchAction: 'none' }}
                >
                    {/* å·¦ä¾§/ä¸Šæ–¹ï¼šæ—¶é’ŸåŒºåŸŸ */}
                    <div className="relative w-full max-w-sm md:max-w-md lg:max-w-lg mb-6 md:mb-0 shrink-0">
                        {/* ç§»åŠ¨ç«¯æ ‡é¢˜ */}
                        <div className="md:hidden flex justify-between items-center mb-4 bg-white p-3 rounded-2xl shadow-sm border border-sky-100">
                            <h1 className="text-lg font-bold text-sky-600 flex items-center gap-2">
                                <Icon path={icons.star} className="text-yellow-400 fill-current" /> è®¤è¯†æ—¶é’Ÿ
                            </h1>
                            <div className="flex gap-2">
                                <button onClick={() => setSoundEnabled(!soundEnabled)} className="text-gray-400 p-1">
                                    <Icon path={soundEnabled ? icons.vol : icons.volX} className={soundEnabled ? "text-green-500" : ""} />
                                </button>
                                <button onClick={() => setShowMinutes(!showMinutes)} className="text-gray-400 p-1">
                                    <Icon path={showMinutes ? icons.eye : icons.eyeOff} className={showMinutes ? "text-pink-500" : ""} />
                                </button>
                            </div>
                        </div>

                        {/* æ—¶é’Ÿä¸»ä½“ */}
                        <div 
                            className="relative w-full bg-white rounded-full shadow-2xl shadow-sky-100 border-4 border-white"
                            style={{ aspectRatio: '1 / 1' }}
                        >
                            <svg 
                                ref={clockRef}
                                viewBox="0 0 100 100" 
                                className="w-full h-full"
                                preserveAspectRatio="xMidYMid meet"
                            >
                                <circle cx="50" cy="50" r="49" fill="white" stroke="#E0F2FE" strokeWidth="1" />
                                <circle cx="50" cy="50" r="38" fill="#F0F9FF" stroke="none" />
                                
                                {Array.from({ length: 60 }).map((_, i) => (
                                    <line
                                        key={i}
                                        x1="50" y1="10"
                                        x2="50" y2={i % 5 === 0 ? "13" : "11"}
                                        stroke={i % 5 === 0 ? "#94A3B8" : "#CBD5E1"}
                                        strokeWidth={i % 5 === 0 ? "1.5" : "0.5"}
                                        transform={`rotate(${i * 6} 50 50)`}
                                    />
                                ))}

                                {renderClockNumbers()}

                                {/* æ—¶é’ˆï¼šä¿®å¤IOSæ˜¾ç¤ºé—®é¢˜ - åˆ†ç¦»æ—‹è½¬(Transform)å’Œæ‘‡æ™ƒ(Animation) */}
                                <g 
                                    transform={`rotate(${hourAngle} 50 50)`} 
                                    onMouseDown={(e) => startDrag(e, 'hour')}
                                    onTouchStart={(e) => startDrag(e, 'hour')}
                                    style={{ cursor: dragTarget ? 'grabbing' : 'grab' }}
                                >
                                    {/* è§¦æ‘¸çƒ­åŒº (ä¸å‚ä¸æ‘‡æ™ƒï¼Œä¿æŒç¨³å®š) */}
                                    <circle cx="50" cy="35" r="15" fill="transparent" />
                                    <line x1="50" y1="50" x2="50" y2="25" stroke="transparent" strokeWidth="15" />
                                    
                                    {/* è§†è§‰å…ƒç´  (å‚ä¸æ‘‡æ™ƒåŠ¨ç”») */}
                                    <g className={`hover:opacity-80 ${wiggle ? 'animate-wiggle' : ''}`}>
                                        <rect 
                                            x="48.5" y="25" width="3" height="25" rx="1.5" 
                                            fill="#3B82F6" 
                                            filter={dragTarget === 'hour' ? "drop-shadow(0 0 3px rgba(59, 130, 246, 0.8))" : ""}
                                        />
                                    </g>
                                </g>

                                {/* åˆ†é’ˆï¼šåŒä¸Šä¿®å¤ */}
                                <g 
                                    transform={`rotate(${minuteAngle} 50 50)`}
                                    onMouseDown={(e) => startDrag(e, 'minute')}
                                    onTouchStart={(e) => startDrag(e, 'minute')}
                                    style={{ cursor: dragTarget ? 'grabbing' : 'grab' }}
                                >
                                    {/* è§¦æ‘¸çƒ­åŒº */}
                                    <circle cx="50" cy="20" r="15" fill="transparent" />
                                    <line x1="50" y1="50" x2="50" y2="15" stroke="transparent" strokeWidth="15" />
                                    
                                    {/* è§†è§‰å…ƒç´  */}
                                    <g className={`hover:opacity-80 ${wiggle ? 'animate-wiggle' : ''}`}>
                                        <line x1="50" y1="50" x2="50" y2="15" stroke="#EC4899" strokeWidth="2" strokeLinecap="round" />
                                        <circle cx="50" cy="15" r="3" fill="#EC4899" 
                                            filter={dragTarget === 'minute' ? "drop-shadow(0 0 3px rgba(236, 72, 153, 0.8))" : ""}
                                        />
                                        <path d="M 50 12 L 47 16 L 53 16 Z" fill="#EC4899" />
                                    </g>
                                </g>

                                <circle cx="50" cy="50" r="2.5" fill="#1E3A8A" stroke="white" strokeWidth="0.5" pointerEvents="none" />
                            </svg>

                            {/* æ•°å­—æ—¶é—´æ˜¾ç¤º */}
                            {mode === 'explore' && (
                                <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none mt-16 md:mt-20 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-xl shadow-lg border border-sky-100 text-center min-w-[120px]">
                                    <div className="text-2xl md:text-3xl font-bold text-slate-700 font-mono">
                                        {displayHours}:{minutes.toString().padStart(2, '0')}
                                    </div>
                                    <div className="text-xs md:text-sm text-pink-600 font-bold mt-1">
                                    {minutes % 5 === 0 && minutes !== 0 ? (
                                        <span>æ•°å­— {minutes/5} = {minutes} åˆ†</span>
                                    ) : (
                                        <span>{minutes} åˆ†</span>
                                    )}
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>

                    {/* å³ä¾§/ä¸‹æ–¹ï¼šæ§åˆ¶é¢æ¿ */}
                    <div className="w-full max-w-md flex flex-col gap-4">
                        {/* æ¡Œé¢ç«¯æ ‡é¢˜ */}
                        <div className="hidden md:flex justify-between items-center mb-2 bg-white p-4 rounded-2xl shadow-sm border-2 border-sky-100">
                            <h1 className="text-2xl font-bold text-sky-600 flex items-center gap-2">
                                <Icon path={icons.star} className="text-yellow-400 fill-current" /> è®¤è¯†æ—¶é’Ÿ
                            </h1>
                            <div className="flex gap-2">
                                <button 
                                    onClick={() => setSoundEnabled(!soundEnabled)}
                                    className={`p-2 rounded-full border-2 transition-colors ${soundEnabled ? 'bg-green-100 border-green-300 text-green-600' : 'bg-gray-100 border-gray-300 text-gray-400'}`}
                                    title={soundEnabled ? "å…³é—­å£°éŸ³" : "å¼€å¯å£°éŸ³"}
                                >
                                    <Icon path={soundEnabled ? icons.vol : icons.volX} />
                                </button>
                                <button 
                                    onClick={() => setShowMinutes(!showMinutes)}
                                    className={`p-2 rounded-full border-2 transition-colors ${showMinutes ? 'bg-pink-100 border-pink-300 text-pink-600' : 'bg-gray-100 border-gray-300 text-gray-400'}`}
                                    title={showMinutes ? "éšè—åˆ†é’Ÿæç¤º" : "æ˜¾ç¤ºåˆ†é’Ÿæç¤º"}
                                >
                                    <Icon path={showMinutes ? icons.eye : icons.eyeOff} />
                                </button>
                            </div>
                        </div>

                        <div className="bg-white p-6 rounded-3xl shadow-lg shadow-indigo-100/50 border border-indigo-50 flex flex-col justify-center h-full min-h-[200px]">
                            <div className="flex p-1 bg-slate-100 rounded-2xl mb-6">
                                <button 
                                    onClick={() => toggleMode('explore')}
                                    className={`flex-1 py-3 rounded-xl text-sm md:text-base font-bold flex items-center justify-center gap-2 transition-all ${mode === 'explore' ? 'bg-white shadow text-sky-600' : 'text-slate-400'}`}
                                >
                                    <Icon path={icons.help} size={20} /> è‡ªç”±æ¢ç´¢
                                </button>
                                <button 
                                    onClick={() => toggleMode('quiz')}
                                    className={`flex-1 py-3 rounded-xl text-sm md:text-base font-bold flex items-center justify-center gap-2 transition-all ${mode === 'quiz' ? 'bg-white shadow text-pink-600' : 'text-slate-400'}`}
                                >
                                    <Icon path={icons.trophy} size={20} /> æŒ‘æˆ˜ä»»åŠ¡
                                </button>
                            </div>

                            <div className="text-center flex-1 flex flex-col justify-center">
                                <p className="text-xl text-slate-700 font-medium mb-6 min-h-[3.5rem] flex items-center justify-center px-4 leading-relaxed">
                                    {message}
                                </p>

                                {mode === 'quiz' && (
                                    <div className="flex flex-col gap-5 w-full">
                                        <button 
                                            onClick={checkAnswer}
                                            className="w-full bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white text-lg font-bold py-4 rounded-2xl shadow-lg shadow-pink-200 active:scale-95 transition-all"
                                        >
                                            æˆ‘æ‹¨å¥½äº†ï¼æäº¤ç­”æ¡ˆ
                                        </button>
                                        <div className="flex justify-between items-center px-4 pt-4 border-t border-slate-100">
                                            <span className="text-slate-400 font-medium">å½“å‰å¾—åˆ†</span>
                                            <span className="text-4xl font-black text-yellow-400">{score}</span>
                                        </div>
                                    </div>
                                )}
                                
                                {mode === 'explore' && (
                                    <div className="text-slate-500 bg-slate-50 p-4 rounded-xl border border-slate-100">
                                        <p className="flex items-center justify-center gap-2 text-sm md:text-base">
                                            <Icon path={icons.vol} className="text-sky-500" />
                                            <span>æ¾å¼€æŒ‡é’ˆï¼Œæˆ‘ä¼šè¯»å‡ºæ—¶é—´å“¦ï¼</span>
                                        </p>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>